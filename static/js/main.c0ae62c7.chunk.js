(this.webpackJsonpspaceships=this.webpackJsonpspaceships||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var _=a(0),s=a.n(_),r=a(3),i=a.n(r),n=(a(16),a(17),a(4));var l=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(n.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(l,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1),_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(10),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),KEY={LEFT:37,RIGHT:39,UP:38,DOWN:40},maxSize=260,Game=function(_Component){function Game(){var e;return Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,Game),(e=Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__.a)(Game).call(this))).canvasRef=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),e.state={ship:{x:120,y:120,width:20,height:20},bullets:[],score:0,highScore:0,touchStart:void 0},e.draw=e.draw.bind(Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e.startGame=e.startGame.bind(Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__.a)(e)),e}return Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_6__.a)(Game,_Component),Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(Game,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeys.bind(this,!0)),window.addEventListener("touchstart",this.handleTouchStart.bind(this,!1)),window.addEventListener("touchend",this.handleTouchEnd.bind(this,!1)),this.startGame()}},{key:"componentWillUnmount",value:function(){clearInterval(this.accelerateInterval),clearInterval(this.generationInterval),clearInterval(this.updateInterval),clearInterval(this.detectionInterval)}},{key:"startGame",value:function(){var e=this;this.setState({ship:{x:120,y:120,width:20,height:20},bullets:[],score:0}),this.accelerateInterval=setInterval((function(){return e.accelerateGame()}),7500),this.generationIntervalDuration=1e3,this.generationInterval=setInterval((function(){return e.generateNewBullet()}),this.generationIntervalDuration),this.updateIntervalDuration=25,this.updateInterval=setInterval((function(){return e.updateBullets()}),this.updateIntervalDuration),this.detectionInterval=setInterval((function(){return e.detectCollisions()}),5)}},{key:"draw",value:function(){var e=this.canvasRef.current.getContext("2d");e.clearRect(0,0,this.canvasRef.current.width,this.canvasRef.current.height),e.fillStyle="blue",e.fillRect(this.state.ship.x,this.state.ship.y,this.state.ship.width,this.state.ship.height);for(var t=0;t<this.state.bullets.length;t++){var a=this.state.bullets[t];e.fillStyle="red",e.fillRect(a.x,a.y,a.width,a.height)}}},{key:"handleKeys",value:function(e,t){t.keyCode===KEY.LEFT&&this.moveHorizontally(-20),t.keyCode===KEY.RIGHT&&this.moveHorizontally(20),t.keyCode===KEY.UP&&this.moveVertically(-20),t.keyCode===KEY.DOWN&&this.moveVertically(20)}},{key:"handleTouchStart",value:function(e,t){this.setState({touchStart:t.changedTouches[0]})}},{key:"handleTouchEnd",value:function(e,t){if(void 0!==this.state.touchStart){var a=t.changedTouches[0],_=this.state.touchStart,s=Math.abs(_.clientX-a.clientX),r=Math.abs(_.clientY-a.clientY);s>r?_.clientX>a.clientX?this.moveHorizontally(-20):this.moveHorizontally(20):s<r&&(_.clientY>a.clientY?this.moveVertically(-20):this.moveVertically(20)),this.setState({touchStart:a})}}},{key:"moveHorizontally",value:function(e){var t=this,a=this.state.ship;a.x+e<=maxSize-20&&a.x+e>=0&&(a.x+=e,this.setState({ship:a},(function(){return t.draw()})))}},{key:"moveVertically",value:function(e){var t=this,a=this.state.ship;a.y+e<=maxSize-20&&a.y+e>=0&&(a.y+=e,this.setState({ship:a},(function(){return t.draw()})))}},{key:"updateBullets",value:function(){var e=this,t=this.state.bullets.reduce((function(t,a){return a[a.axis]>=-20&&a[a.axis]<=maxSize?(a.nextFrame(),t.push(a)):e.setState({score:e.state.score+1}),t}),[]);this.setState({bullets:t},(function(){e.draw()}))}},{key:"generateNewBullet",value:function generateNewBullet(){var bullet={axis:Math.round(Math.random())?"x":"y",direction:Math.round(Math.random())?"+":"-",width:20,height:20};"x"===bullet.axis?(bullet.y=this.state.ship.y,"+"===bullet.direction?bullet.x=-20:bullet.x=maxSize):(bullet.x=this.state.ship.x,"+"===bullet.direction?bullet.y=-20:bullet.y=maxSize),bullet.nextFrame=function(){bullet[bullet.axis]=eval(bullet[bullet.axis]+bullet.direction+"2")},this.setState({bullets:[].concat(Object(_Users_raphael_Desktop_spaceships_dodgy_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(this.state.bullets),[bullet])})}},{key:"detectCollisions",value:function(){var e=this;this.state.bullets.forEach((function(t){t.x<e.state.ship.x+e.state.ship.width&&t.x+t.width>e.state.ship.x&&t.y<e.state.ship.y+e.state.ship.height&&t.y+t.width>e.state.ship.y&&(clearInterval(e.accelerateInterval),clearInterval(e.updateInterval),clearInterval(e.generationInterval),clearInterval(e.detectionInterval),e.state.score>e.state.highScore?e.setState({highScore:e.state.score},(function(){e.startGame()})):e.startGame())}))}},{key:"accelerateGame",value:function(){var e=this;clearInterval(this.updateInterval),this.updateIntervalDuration=Math.round(this.updateIntervalDuration/1.2),this.updateInterval=setInterval((function(){return e.updateBullets()}),this.updateIntervalDuration),clearInterval(this.generationInterval),this.generationIntervalDuration=Math.round(this.generationIntervalDuration/1.2),this.generationInterval=setInterval((function(){return e.generateNewBullet()}),this.generationIntervalDuration)}},{key:"render",value:function(){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"fixed",height:"100%",overflow:"hidden",width:"100%"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("h4",null,"Use arrows or swipes to move"),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("canvas",{ref:this.canvasRef,width:maxSize,height:maxSize,style:{border:"1px solid black"}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("br",null),"Score: ",10*this.state.score," | Highscore: ",10*this.state.highScore)}}]),Game}(react__WEBPACK_IMPORTED_MODULE_7__.Component);__webpack_exports__.a=Game}},[[11,1,2]]]);
//# sourceMappingURL=main.c0ae62c7.chunk.js.map